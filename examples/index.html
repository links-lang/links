<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Links examples</title>
    <link rel="stylesheet" type="text/css" href="/examples/css/doc.css" />
    <script>
      window.addEventListener('load', function () {
        const examples = 'examples/';
        const frame = document.getElementById('exampleFrame');
        const nav = document.querySelector('nav');
        const loadingOverlay = document.getElementById('loadingOverlay');

        function isMobile () {
          return !(nav.getBoundingClientRect().width < document.body.getBoundingClientRect().width / 2);
        }

        function replaceExample (url) {
          loadingOverlay.style.display = 'flex';
          const exampleUrl = '/' + examples + url;
          if (isMobile()) {
            location = exampleUrl;
          } else {
            frame.data = exampleUrl;
          }
        }

        // Set initial example
        if (location.hash) {
          replaceExample(location.hash.slice(1));
        }

        // Intercept navigation
        window.addEventListener('hashchange', function (e) {
          e.preventDefault();
          if (location.hash) {
            replaceExample(location.hash.slice(1));
          }
          history.replaceState({ }, '', location.hash);
        });

        frame.addEventListener('load', function () {
          loadingOverlay.style.display = 'none';
        });

        const frameLinks = document.querySelectorAll('nav a.frame-link');

        for (let i = 0; i < frameLinks.length; i++) {
          const a = frameLinks[i];
          if (a.getAttribute('href')) {
            a.addEventListener('click', function (e) {
              if (!isMobile()) {
                e.preventDefault();
                location.hash = a.getAttribute('href').slice(1).replace(examples, "");
              }
            });
          }
        }
      });
    </script>
  </head>
  <body>
    <header>
      <h1>Links examples</h1>
    </header>
    <nav>
      <section>
        <h3>The following examples are described in <a href="http://links-lang.org/papers/links-fmco06.pdf">Links: Web Programming Without Tiers</a></h3>
        <ul>
          <li>
            <a class="frame-link" href="/examples/dictionary/dictSuggestUpdate.links">Dictionary suggestion with database update</a>
            <a href="/examplessrc/dictionary/dictSuggestUpdate.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/draggable.links">Draggable lists</a>
            <a href="/examplessrc/draggable.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/progress.links">Progress bar</a>
            <a href="/examplessrc/progress.links" target="_blank">source</a>
          </li>
        </ul>
      </section>
      <section>
        <h3>The following examples appeared in earlier drafts of the same paper</h3>
        <ul>
          <li>
            <a class="frame-link" href="/examples/factorial.links">Factorial</a>
            <a href="/examplessrc/factorial.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/dictionary/dictSuggest.links">Dictionary suggestion (with styles)</a>
            <a href="/examplessrc/dictionary/dictSuggest.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/dictionary/dictSuggestLite.links">Dictionary suggestion (no styles)</a>
            <a href="/examplessrc/dictionary/dictSuggestLite.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/draggableDb.links">Draggable lists (database version)</a>
            <a href="/examplessrc/draggableDb.links" target="_blank">source</a>
          </li>
        </ul>
      </section>
      <section>
        <h3>Formlets examples</h3>
        <ul>
          <li>
            <a class="frame-link" href="/examples/buttons.links">Buttons</a>
            <a href="/examplessrc/buttons.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/formsTest.links">A simple test formlet</a>
            <a href="/examplessrc/formsTest.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/validate.links">Validation</a>
            <a href="/examplessrc/validate.links" target="_blank">source</a>
          </li>
        </ul>
      </section>
      <section>
        <h3>Other examples</h3>
        <ul>
          <li>
            <a class="frame-link" href="/examples/loginFlow.links">Login flow using <code>sendSuspend</code></a>
            <a href="/examplessrc/loginFlow.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/paginate.links">Pagination</a>
            <a href="/examplessrc/paginate.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/mandelbrot.links">Mandelbrot sets</a>
            <a href="/examplessrc/mandelbrot.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/mandelcolor.links">Multi-coloured mandelbrot set</a>
            <a href="/examplessrc/mandelcolor.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/todo.links">Todo list (client)</a>
            <a href="/examplessrc/todo.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/todoDb.links">Todo list (server)</a>
            <a href="/examplessrc/todoDb.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/crop.links">Draggable Cropping Frame</a>
            <a href="/examplessrc/crop.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/wine.links">Winestore</a>
            <a href="/examplessrc/wine.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/filter.links">Dynamic wine filtering</a>
            <a href="/examplessrc/filter.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/citations.links">Citeseer data</a>
            <a href="/examplessrc/citations.links" target="_blank">source</a>
          </li>
        </ul>
      </section>
      <section>
        <h3>Game examples</h3>
        <ul>
          <li>
            <a class="frame-link" href="/examples/games/twentyfortyeight.links">2048 in Links</a>
            <a href="/examplessrc/games/twentyfortyeight.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/games/breakout.links">Breakout in Links</a>
            <a href="/examplessrc/games/breakout.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/games/tetris.links">Tetris in Links</a>
            <a href="/examplessrc/games/tetris.links" target="_blank">source</a>
          </li>
          <li>
            <a class="frame-link" href="/examples/games/pacman.links">Pillman</a>
            <a href="/examplessrc/games/pacman.links" target="_blank">source</a>
          </li>
        </ul>
      </section>
    </nav>
    <main>
      <div class="loading-overlay" id="loadingOverlay">
        <div>
          <div class="sk-folding-cube sk-blue">
            <div class="sk-cube1 sk-cube"></div>
            <div class="sk-cube2 sk-cube"></div>
            <div class="sk-cube3 sk-cube"></div>
          </div>
          <div class="sk-folding-cube sk-red">
            <div class="sk-cube1 sk-cube"></div>
            <div class="sk-cube2 sk-cube"></div>
            <div class="sk-cube3 sk-cube"></div>
          </div>
        </div>
        <span>Loading example</span>
      </div>
      <object type="text/html" id="exampleFrame"></object>
    </main>
  </body>
</html>
