Use linear variables in deep handlers (1)
tests/handlers/lin_deep1.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a deep handler.* 
args : --enable-handlers

Use linear variables in deep handlers (2)
tests/handlers/lin_deep2.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a deep handler.* 
args : --enable-handlers

Use linear variables in deep handlers (3)
tests/handlers/lin_deep3.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* has linear type .* is used .* times.* 
args : --enable-handlers

Use linear variables in deep handlers (4)
tests/handlers/lin_deep4.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a deep handler.* 
args : --enable-handlers

Linear operation and continuation
handle (ldo LL(20) + 1) {case LL(i, k) -> k(i)}
stdout : 21 : Int
args : --enable-handlers

Non-linear operation and continuation
handle (do UU(20) + 1) {case UU(i, k) -> k(i) + k(i)}
stdout : 42 : Int
args : --enable-handlers

Use linear variable in linear continuation
{linfun f(x) {40+x} handle (f(ldo LL)) {case LL(k) -> k(2)}}
stdout : 42 : Int
args : --enable-handlers

Use linear variable in non-linear continuation
{linfun f(x) {x} handle (f(do UU)) {case UU(k) -> k(1)}}
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a non-linear continuation.* 
args : --enable-handlers

New implementation of examples/handlers/choose.links
tests/handlers/new_choose.links
filemode : true
stdout : [10, 10, 18, 12, 20] : [Int]
args : --enable-handlers

Combine unlimited choice and state
tests/handlers/choose_and_state.links
filemode : true
stdout : [3, 4, 9, 10, 3, 3, 3, 3] : [Int]
args : --enable-handlers

Combine linear choice and unlimited state
tests/handlers/choose_and_state2.links
filemode : true
stdout : 3 : Int
args : --enable-handlers

Check the first part of Issue 544
tests/handlers/issue544a.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a non-linear continuation.* 
args : --enable-handlers

Check the second part of Issue 544
tests/handlers/issue544b.links
filemode : true
exit : 1
stderr : @.*Type error: Variable .* of linear type .* is used in a non-linear continuation.* 
args : --enable-handlers