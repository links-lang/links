(jbuild_version 1)

(ocamlyacc (parser jsonparse xmlParser))
(ocamllex (jsonlex lexer xmlLexer))

(library
 ((name links_core)
  (public_name links-core)
  (synopsis "Links core")
  (wrapped false)
  (modes (native))
  (flags (:standard -safe-string -dtypes -w Ae-44-45-60 -g -cclib -lunix -thread))
  (libraries (str deriving unix safepass cgi base64 ANSITerminal linenoise
              cohttp lwt websocket websocket-lwt.cohttp))
  (preprocess (action (run deriving/deriving ${<})))))